<head>
  <link
    rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined"
  />
</head>

<section id="services" class="w-full">
  <div class="max-w-7xl mx-auto px-4">
    <div class="grid md:grid-cols-2 gap-8 items-start">
      <!-- LEFT COLUMN -->
      <div
        class="md:sticky md:top-0 h-fit py-10 md:py-32 flex flex-col justify-start bg-transparent z-10 md:pr-8"
      >
        <div class="mb-6">
          <span
            class="inline-block text-elivion-green text-sm font-mono uppercase tracking-widest mb-4"
          >
            What We Offer
          </span>
          <h2
            class="text-4xl md:text-5xl lg:text-6xl font-header leading-tight"
          >
            Our <span class="text-elivion-green">Services</span>
          </h2>
        </div>

        <!-- PROGRESS INDICATORS -->
        <div class="mt-8 md:mt-12 space-y-6 hidden md:block">
          {
            [
              "Enterprise Solutions",
              "Corporate Learning & Leadership",
              "Talent & Recruitment",
              "People Development",
              "Training & Workshops",
            ].map((service, index) => (
              <div
                class="flex items-center space-x-4 group cursor-pointer service-indicator transition-all duration-500"
                data-service={index}
              >
                <div class="flex-shrink-0 w-4 h-4 bg-elivion-blue/30 rounded-full transition-all duration-500 group-[.active]:bg-elivion-blue group-[.active]:scale-150 group-[.active]:ring-4 group-[.active]:ring-elivion-blue/30" />
                <span class="text-slate-400 text-lg transition-all duration-500 group-[.active]:text-white group-[.active]:font-semibold group-[.active]:text-lg">
                  {service}
                </span>
              </div>
            ))
          }
        </div>
      </div>

      <!-- RIGHT COLUMN -->
      <div
        class="flex flex-col gap-8 md:gap-16 py-10 md:py-32 md:pt-44 z-0 md:pl-8 md:snap-y md:snap-mandatory scroll-smooth"
        id="services-container"
      >
        <!-- SERVICE 1 -->
        <div
          class="service-card opacity-100 md:opacity-30 md:translate-y-12 transition-all duration-700 ease-out min-h-[300px] md:min-h-[400px] md:flex md:items-center md:snap-center md:snap-always"
          data-service="0"
        >
          <div
            class="relative p-6 md:p-8 bg-gradient-to-br from-white/5 to-white/[0.02] border border-white/10 rounded-3xl backdrop-blur-xl transition-all duration-700 hover:border-white/30 hover:-translate-y-2 min-h-[300px] md:min-h-[350px] flex flex-col justify-center w-full"
          >
            <div class="mb-6">
              <div
                class="w-14 h-14 bg-elivion-blue/20 rounded-2xl flex items-center justify-center"
              >
                <span class="material-symbols-outlined">hub</span>
              </div>
            </div>
            <h3 class="text-2xl md:text-3xl font-semibold text-white mb-4">
              Enterprise AI Solutions
            </h3>
            <p class="text-lg text-slate-300 leading-relaxed">
              Design and deployment of AI platforms tailored to corporate
              ecosystems, from secure infrastructure and model integration to
              advanced analytics that inform decision-making and operations.
            </p>
          </div>
        </div>

        <!-- SERVICE 2 -->
        <div
          class="service-card opacity-100 md:opacity-30 md:translate-y-12 transition-all duration-700 ease-out min-h-[300px] md:min-h-[400px] md:flex md:items-center md:snap-center md:snap-always"
          data-service="1"
        >
          <div
            class="relative p-6 md:p-8 bg-gradient-to-br from-white/5 to-white/[0.02] border border-white/10 rounded-3xl backdrop-blur-xl transition-all duration-700 hover:border-white/30 hover:-translate-y-2 min-h-[300px] md:min-h-[350px] flex flex-col justify-center w-full"
          >
            <div class="mb-6">
              <div
                class="w-14 h-14 bg-elivion-blue/20 rounded-2xl flex items-center justify-center"
              >
                <span class="material-symbols-outlined">conversion_path</span>
              </div>
            </div>
            <h3 class="text-2xl md:text-3xl font-semibold text-white mb-4">
              AI for Corporate Learning & Leadership
            </h3>
            <p class="text-lg text-slate-300 leading-relaxed">
              Personalized, data-driven learning and leadership development
              journeys, enabling executives and teams to grow with agility and
              confidence.
            </p>
          </div>
        </div>

        <!-- SERVICE 3 -->
        <div
          class="service-card opacity-100 md:opacity-30 md:translate-y-12 transition-all duration-700 ease-out min-h-[300px] md:min-h-[400px] md:flex md:items-center md:snap-center md:snap-always"
          data-service="2"
        >
          <div
            class="relative p-6 md:p-8 bg-gradient-to-br from-white/5 to-white/[0.02] border border-white/10 rounded-3xl backdrop-blur-xl transition-all duration-700 hover:border-white/30 hover:-translate-y-2 min-h-[300px] md:min-h-[350px] flex flex-col justify-center w-full"
          >
            <div class="mb-6">
              <div
                class="w-14 h-14 bg-elivion-blue/20 rounded-2xl flex items-center justify-center"
              >
                <span class="material-symbols-outlined">group_search</span>
              </div>
            </div>
            <h3 class="text-2xl md:text-3xl font-semibold text-white mb-4">
              AI for Talent & Recruitment
            </h3>
            <p class="text-lg text-slate-300 leading-relaxed">
              Scalable recruitment solutions powered by AI to accelerate hiring,
              improve candidate matching, and ensure fairness in talent
              acquisition.
            </p>
          </div>
        </div>

        <!-- SERVICE 4 -->
        <div
          class="service-card opacity-100 md:opacity-30 md:translate-y-12 transition-all duration-700 ease-out min-h-[300px] md:min-h-[400px] md:flex md:items-center md:snap-center md:snap-always"
          data-service="3"
        >
          <div
            class="relative p-6 md:p-8 bg-gradient-to-br from-white/5 to-white/[0.02] border border-white/10 rounded-3xl backdrop-blur-xl transition-all duration-700 hover:border-white/30 hover:-translate-y-2 min-h-[300px] md:min-h-[350px] flex flex-col justify-center w-full"
          >
            <div class="mb-6">
              <div
                class="w-14 h-14 bg-elivion-blue/20 rounded-2xl flex items-center justify-center"
              >
                <span class="material-symbols-outlined">psychology</span>
              </div>
            </div>
            <h3 class="text-2xl md:text-3xl font-semibold text-white mb-4">
              AI for People Development
            </h3>
            <p class="text-lg text-slate-300 leading-relaxed">
              Continuous growth programs that use adaptive AI to personalize
              learning paths, foster engagement, and upskill the workforce.
            </p>
          </div>
        </div>

        <!-- SERVICE 5 -->
        <div
          class="service-card opacity-100 md:opacity-30 md:translate-y-12 transition-all duration-700 ease-out min-h-[300px] md:min-h-[400px] md:flex md:items-center md:snap-center md:snap-always"
          data-service="4"
        >
          <div
            class="relative p-6 md:p-8 bg-gradient-to-br from-white/5 to-white/[0.02] border border-white/10 rounded-3xl backdrop-blur-xl transition-all duration-700 hover:border-white/30 hover:-translate-y-2 min-h-[300px] md:min-h-[350px] flex flex-col justify-center w-full"
          >
            <div class="mb-6">
              <div
                class="w-14 h-14 bg-elivion-blue/20 rounded-2xl flex items-center justify-center"
              >
                <span class="material-symbols-outlined">interactive_space</span>
              </div>
            </div>
            <h3 class="text-2xl md:text-3xl font-semibold text-white mb-4">
              AI Training & Workshops
            </h3>
            <p class="text-lg text-slate-300 leading-relaxed">
              We provide executive workshops, discovery sessions, and team
              trainings to build AI literacy, define use cases, and align
              leadership on AI strategy. Our training formats combine
              inspiration with hands-on practice, ensuring organizations not
              only understand AI but know how to apply it safely and
              effectively.
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  .service-card.in-view {
    opacity: 1 !important;
    transform: translateY(0) !important;
  }

  .service-indicator.active {
    transform: scale(1.05);
    margin-left: 1rem;
  }

  @media (max-width: 768px) {
    .service-card {
      opacity: 1 !important;
      transform: none !important;
      min-height: 300px !important;
    }

    #services-container {
      gap: 2rem !important;
      padding-top: 2.5rem !important;
      padding-bottom: 2.5rem !important;
    }
  }
</style>

<script>
  // SCROLL-DRIVEN NAVIGATION
  const observerOptions = {
    root: null, // Use the browser viewport as the reference
    rootMargin: "0px",
    threshold: [0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1.0], // Check visibility at 10% intervals
  };

  // Track which card is currently "active" (closest to center)
  let activeCard: HTMLElement | null = null;
  let isUserScrolling: boolean = false;
  let scrollTimeout: ReturnType<typeof setTimeout> | undefined; // Timer to prevent calculating every single pixel

  // Find which card is closest to viewport center
  function updateActiveIndicator() {
    const cards = document.querySelectorAll(".service-card");
    const viewportCenter = window.innerHeight / 2;

    let closestCard = null;
    let closestDistance = Infinity;

    cards.forEach((card) => {
      const rect = card.getBoundingClientRect();
      const cardCenter = rect.top + rect.height / 2;
      const distance = Math.abs(cardCenter - viewportCenter);

      if (distance < closestDistance) {
        closestDistance = distance;
        closestCard = card;
      }
    });

    if (closestCard && closestCard !== activeCard) {
      activeCard = closestCard;

      document.querySelectorAll(".service-indicator").forEach((indicator) => {
        indicator.classList.remove("active");
      });

      const serviceIndex = (closestCard as HTMLElement).getAttribute("data-service");
      const indicator = document.querySelector(
        `.service-indicator[data-service="${serviceIndex}"]`
      );
      if (indicator) {
        indicator.classList.add("active");
      }
    }
  }

  // Detect when cards enter/exit the viewport
  const cardObserver = new IntersectionObserver((entries) => {
    entries.forEach((entry) => {
      if (entry.isIntersecting) {
        entry.target.classList.add("in-view");
      } else {
        entry.target.classList.remove("in-view");
      }
    });

    updateActiveIndicator();
  }, observerOptions);

  document.querySelectorAll(".service-card").forEach((card) => {
    cardObserver.observe(card);
  });

  window.addEventListener(
    "scroll",
    () => {
      isUserScrolling = true;
      clearTimeout(scrollTimeout);
      scrollTimeout = setTimeout(() => {
        updateActiveIndicator();
        isUserScrolling = false;
      }, 100);
    },
    { passive: true }
  );

  // CLICK HANDLERS - Allow users to jump to a specific service 
  document.querySelectorAll(".service-indicator").forEach((indicator) => {
    indicator.addEventListener("click", () => {
      const serviceIndex = indicator.getAttribute("data-service");
      const targetCard = document.querySelector(
        `.service-card[data-service="${serviceIndex}"]`
      );

      if (targetCard) {
        targetCard.scrollIntoView({
          behavior: "smooth",
          block: "center",
        });
      }
    });
  });

  updateActiveIndicator();
</script>
